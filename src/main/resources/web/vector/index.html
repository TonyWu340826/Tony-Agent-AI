<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>智能知识库</title>
  <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
  <script defer src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script defer src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script defer src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    html,body{height:100%;margin:0;padding:0}
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50">

<header class="sticky top-0 z-[60] backdrop-blur-lg bg-white/90 border-b border-slate-100 shadow-sm">
  <div class="max-w-7xl mx-auto px-3 lg:px-6 py-4">
    <div class="flex items-center">
      <a href="/home.html" class="flex items-center gap-1 cursor-pointer">
        <span class="w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center text-white font-extrabold">宙</span>
        <span class="text-2xl tracking-tight text-slate-950 font-bold">宙斯</span>
      </a>

      <div class="hidden md:flex items-center gap-12 relative flex-1 justify-center">
        <a href="/home.html#features-section" class="flex items-center gap-2 text-slate-800 font-semibold text-base md:text-lg hover:text-blue-600 transition-colors border-b-2 border-transparent hover:border-blue-600 pb-1">平台功能</a>
        <a href="/home.html#tools" class="flex items-center gap-2 text-slate-800 font-semibold text-base md:text-lg hover:text-indigo-600 transition-colors border-b-2 border-transparent hover:border-indigo-600 pb-1">工具合集</a>
        <div class="relative group">
          <a href="#" class="flex items-center gap-2 text-blue-600 font-semibold text-base md:text-lg border-b-2 border-blue-600 pb-1" onclick="event.preventDefault()">AI工作台</a>
          <div class="absolute left-0 top-full mt-2 bg-white rounded-xl shadow-2xl border border-slate-200 w-64 p-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-[100]">
            <a href="/home.html#model" class="flex items-center gap-2 px-3 py-2 text-slate-700 hover:bg-blue-50 rounded-lg">
              <svg class="w-4 h-4 text-slate-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h7l-1 8 11-14h-7l1-6z"/></svg>
              <span>模型服务</span>
            </a>
            <a href="/mcp/index.html" class="flex items-center gap-2 px-3 py-2 text-slate-700 hover:bg-blue-50 rounded-lg">
              <svg class="w-4 h-4 text-slate-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M6 21V6a9 9 0 009 9h3"/></svg>
              <span>MCP</span>
            </a>
            <a href="/home.html#prompt-engineering" class="flex items-center gap-2 px-3 py-2 text-slate-700 hover:bg-blue-50 rounded-lg">
              <svg class="w-4 h-4 text-slate-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 18l6-6-6-6"/><path d="M8 6L2 12l6 6"/></svg>
              <span>Prompt工程</span>
            </a>
            <a href="/vector/index.html" class="flex items-center gap-2 px-3 py-2 text-blue-600 font-semibold hover:bg-blue-50 rounded-lg">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 5h8a3 3 0 013 3v11H5a3 3 0 01-3-3V5z"/><path d="M22 5h-8a3 3 0 00-3 3v11h8a3 3 0 003-3V5z"/></svg>
              <span>智能知识库</span>
            </a>
          </div>
        </div>
      </div>

      <div class="flex items-center gap-3 ml-auto">
        <a id="nav-back" href="/home.html" class="px-3 py-2 rounded-lg bg-slate-100 text-slate-800 text-sm hover:bg-slate-200">返回主页</a>

        <div id="nav-user-wrap" class="hidden relative">
          <div class="flex items-center gap-2">
            <span id="nav-username" class="text-sm font-semibold text-slate-700"></span>
            <span class="w-9 h-9 rounded-full overflow-hidden border-2 border-slate-200 bg-white">
              <img id="nav-avatar-img" class="w-full h-full object-cover" alt="用户头像" />
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="max-w-7xl mx-auto px-4 py-8">
  <div id="root"></div>
</main>

<script type="text/babel" src="/vector/vector-ui.js"></script>

<script>
  (function(){
    const renderUserNav = async () => {
      try {
        const nameEl = document.getElementById('nav-username');
        const userWrap = document.getElementById('nav-user-wrap');
        const avatarImg = document.getElementById('nav-avatar-img');
        if (!nameEl || !userWrap || !avatarImg) return;

        const r = await fetch('/api/auth/user', { credentials:'same-origin', cache:'no-store' });
        const t = await r.text();
        let d = {}; try { d = JSON.parse(t||'{}'); } catch(_) { d = {}; }
        const u = d && d.user ? d.user : null;
        if (!u) return;

        const username = u.nickname || u.username || '用户';
        nameEl.textContent = username;
        userWrap.classList.remove('hidden');

        const isVip = Number(u.vipLevel) === 99;
        avatarImg.src = u.avatar || (isVip ? '/image/头像4.jpeg' : '/image/头像1.png');
        avatarImg.onerror = () => { avatarImg.src = '/image/default-avatar.png'; };
      } catch(_) {}
    };

    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', renderUserNav);
    else renderUserNav();
  })();
</script>
</body>
</html>
